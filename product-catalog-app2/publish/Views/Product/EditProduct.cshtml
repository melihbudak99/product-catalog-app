@model product_catalog_app.src.models.Product

@{
    ViewData["Title"] = "Ürün Düzenle";
    
    // Header için parametreler - Premium header ile stats
    ViewBag.HeaderType = "premium";
    ViewBag.HeaderTitle = "Ürün Düzenle";
    ViewBag.HeaderSubtitle = "Ürün bilgilerini güncelleyin ve değişiklikleri kaydedin";
    ViewBag.HeaderIcon = "fas fa-edit";
    ViewBag.HeaderStats = new[] {
        new { Type = "primary", Icon = "fas fa-pencil-alt", Value = "Düzenle", Label = "Ürün Güncelle" },
        new { Type = "secondary", Icon = "fas fa-save", Value = "Kaydet", Label = "Değişiklikleri" }
    };
    
    // Form parametresi
    ViewBag.IsEditMode = true;
}

@section Styles {
    <!-- Form stil modülü -->
    @await Html.PartialAsync("_ProductFormStyles")
}

@await Html.PartialAsync("_ProductFormLayout", Model)

@section Scripts {
    <!-- Form script modülü -->
    @await Html.PartialAsync("_ProductFormScripts")
    
    @* PROFESSIONAL OVERRIDE - PRODUCTION READY *@
    <script>
    (function() {
        'use strict';
        
        // Professional form initialization - override amateur code
        document.addEventListener('DOMContentLoaded', function() {
            // Suppress amateur console logs
            const originalConsole = {
                log: console.log,
                warn: console.warn,
                error: console.error
            };
            
            console.log = function(...args) {
                const message = args.join(' ');
                // Block amateur logging patterns
                if (message.includes('Section') && (message.includes('Content found') || message.includes('Header found'))) return;
                if (message.includes('collapsible section sayısı')) return;
                if (message.includes('Initial state for')) return;
                if (message.includes('collapsible olarak ayarlandı')) return;
                if (message.includes('Rich Text Editor') && message.includes('başarıyla')) return;
                
                // Allow professional logs only
                originalConsole.log.apply(console, args);
            };
            
            console.warn = function(...args) {
                const message = args.join(' ');
                if (message.includes('initialization failed')) return;
                if (message.includes('not found, skipping')) return;
                
                originalConsole.warn.apply(console, args);
            };
            
            // Professional init with unsaved changes support
            setTimeout(() => {
                console.log('✅ ProductForm: Ready with UnsavedChanges protection');
                
                // Add form container class for visual indicators
                const formContainer = document.querySelector('.product-form-container');
                if (formContainer) {
                    formContainer.classList.add('form-container');
                }
            }, 100);
        });
        
        // Block any amateur function overrides
        Object.defineProperty(window, 'initializeProductForm', {
            value: function() {
                // Professional version handles everything silently
                return true;
            },
            writable: false,
            configurable: false
        });
    })();
    </script>
}
